import{d as Wa,s as Na,b as v,a as z,t as w,c as La,f as ka,k as Oa}from"./disclose-version.CoNHZQ4F.js";import{I as pa,M as e,O as l,N as t,K as m,d as b,J as da,L as ca,c as Ta,Q as $a}from"./utils.sQOqgOVm.js";import{a as ua,s as Ha}from"./calendar.CqQHU_F5.js";import{i as Pa}from"./if.DSc5eMOV.js";import{m as Ua,a as Fa,e as Ga}from"./modalStore.CRgIuiNX.js";import{i as Va}from"./lifecycle.ah3VV2aB.js";var Ma=(a,s)=>Ta(s,!b(s)),Ka=w('<span class="value svelte-1splzaj"> </span>'),Qa=w('<span class="value svelte-1splzaj"> </span>'),qa=w('<span class="value svelte-1splzaj">加载中...</span>'),Ja=w('<div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">产品名称：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item purpose svelte-1splzaj"><span class="label svelte-1splzaj">用途描述：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">联系人：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">联系电话：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">负责销售：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">创建：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">创建时间：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">修改时间：</span> <span class="value svelte-1splzaj"> </span></div>',1),Ya=w('<div class="reservation-info svelte-1splzaj"><div class="header svelte-1splzaj"><h4 class="svelte-1splzaj">预约详情</h4> <button class="detail-btn svelte-1splzaj"> </button></div> <div class="info-grid svelte-1splzaj"><div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">预约日期：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">工位：</span> <!></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">时间段：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">项目工程师：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">测试工程师：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">项目号：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">测试内容：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">客户名称：</span> <span class="value svelte-1splzaj"> </span></div> <!></div></div>');function ds(a,s){pa(s,!0);const n=Na(),r=()=>La(Ua,"$modalStore",n);let{reservation:i}=r().props;console.log(i);let j=$a(!1);const p=d=>{switch(d){case"T1":return"9:30-12:00";case"T2":return"13:00-15:00";case"T3":return"15:00-17:30";case"T4":return"18:00-20:30";case"T5":return"20:30-23:59";default:return"未知时间段"}},c=d=>d.toString().substring(0,16),u=async d=>{try{return(await Fa.get(`/stations/${d}`)).name}catch(f){Ga.handleError(f)}};var _=Ya(),h=e(_),x=l(e(h),2);x.__click=[Ma,j];var S=e(x);t(x),t(h);var A=l(h,2),y=e(A),V=l(e(y),2),_a=e(V,!0);t(V),t(y);var I=l(y,2),fa=l(e(I),2);ua(fa,()=>u(i.station_id),d=>{var f=qa();z(d,f)},(d,f)=>{var g=Ka(),C=e(g,!0);t(g),m(()=>v(C,b(f))),z(d,g)},(d,f)=>{var g=Qa(),C=e(g);t(g),m(()=>v(C,`加载失败:${b(f).message??""}`)),z(d,g)}),t(I);var W=l(I,2),M=l(e(W),2),ga=e(M,!0);m(()=>v(ga,p(i.time_slot))),t(M),t(W);var N=l(W,2),K=l(e(N),2),ma=e(K,!0);t(K),t(N);var L=l(N,2),Q=l(e(L),2),za=e(Q,!0);t(Q),t(L);var k=l(L,2),q=l(e(k),2),ha=e(q,!0);t(q),t(k);var O=l(k,2),J=l(e(O),2),wa=e(J,!0);t(J),t(O);var T=l(O,2),Y=l(e(T),2),ja=e(Y,!0);t(Y),t(T);var ba=l(T,2);Pa(ba,()=>b(j),d=>{var f=Ja(),g=da(f),C=l(e(g),2),xa=e(C,!0);t(C),t(g);var $=l(g,2),Z=l(e($),2),Ca=e(Z,!0);t(Z),t($);var H=l($,2),X=l(e(H),2),Ra=e(X,!0);t(X),t(H);var P=l(H,2),D=l(e(P),2),Aa=e(D,!0);t(D),t(P);var U=l(P,2),B=l(e(U),2),Ea=e(B,!0);t(B),t(U);var F=l(U,2),aa=l(e(F),2),Sa=e(aa,!0);t(aa),t(F);var G=l(F,2),sa=l(e(G),2),ya=e(sa,!0);m(()=>v(ya,c(i.created_on))),t(sa),t(G);var ea=l(G,2),ta=l(e(ea),2),Ia=e(ta,!0);m(()=>v(Ia,c(i.updated_on))),t(ta),t(ea),m(()=>{v(xa,i.product_name??""),v(Ca,i.purpose_description??""),v(Ra,i.contact_name??""),v(Aa,i.contact_phone??""),v(Ea,i.sales??""),v(Sa,i.reservate_by??"")}),z(d,f)}),t(A),t(_),m(()=>{v(S,`${(b(j)?"收起":"展开")??""}详情`),v(_a,i.reservation_date),v(ma,i.project_engineer),v(za,i.testing_engineer),v(ha,i.job_no),v(wa,i.tests),v(ja,i.client_name)}),z(a,_),ca()}Wa(["click"]);function Za(a,s,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?a!==s||!r:!s.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(a):r?r.value:s.get(a)}function Xa(a,s,n,r,i){if(typeof s=="function"?a!==s||!i:!s.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s.set(a,n),n}var E;function Da(a,s=!1){return window.__TAURI_INTERNALS__.transformCallback(a,s)}async function o(a,s={},n){return window.__TAURI_INTERNALS__.invoke(a,s,n)}function cs(a,s="asset"){return window.__TAURI_INTERNALS__.convertFileSrc(a,s)}class Ba{get rid(){return Za(this,E,"f")}constructor(s){E.set(this,void 0),Xa(this,E,s)}async close(){return o("plugin:resources|close",{rid:this.rid})}}E=new WeakMap;var na;(function(a){a.WINDOW_RESIZED="tauri://resize",a.WINDOW_MOVED="tauri://move",a.WINDOW_CLOSE_REQUESTED="tauri://close-requested",a.WINDOW_DESTROYED="tauri://destroyed",a.WINDOW_FOCUS="tauri://focus",a.WINDOW_BLUR="tauri://blur",a.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",a.WINDOW_THEME_CHANGED="tauri://theme-changed",a.WINDOW_CREATED="tauri://window-created",a.WEBVIEW_CREATED="tauri://webview-created",a.DRAG_ENTER="tauri://drag-enter",a.DRAG_OVER="tauri://drag-over",a.DRAG_DROP="tauri://drag-drop",a.DRAG_LEAVE="tauri://drag-leave"})(na||(na={}));async function as(a,s){await o("plugin:event|unlisten",{event:a,eventId:s})}async function la(a,s,n){var r;const i=(r=void 0)!==null&&r!==void 0?r:{kind:"Any"};return o("plugin:event|listen",{event:a,target:i,handler:Da(s)}).then(j=>async()=>as(a,j))}class R extends Ba{constructor(s){super(s)}static async load(s,n){const r=await o("plugin:store|load",{path:s,...n});return new R(r)}static async get(s){return await o("plugin:store|get_store",{path:s}).then(n=>n?new R(n):null)}async set(s,n){await o("plugin:store|set",{rid:this.rid,key:s,value:n})}async get(s){const[n,r]=await o("plugin:store|get",{rid:this.rid,key:s});return r?n:void 0}async has(s){return await o("plugin:store|has",{rid:this.rid,key:s})}async delete(s){return await o("plugin:store|delete",{rid:this.rid,key:s})}async clear(){await o("plugin:store|clear",{rid:this.rid})}async reset(){await o("plugin:store|reset",{rid:this.rid})}async keys(){return await o("plugin:store|keys",{rid:this.rid})}async values(){return await o("plugin:store|values",{rid:this.rid})}async entries(){return await o("plugin:store|entries",{rid:this.rid})}async length(){return await o("plugin:store|length",{rid:this.rid})}async reload(){await o("plugin:store|reload",{rid:this.rid})}async save(){await o("plugin:store|save",{rid:this.rid})}async onKeyChange(s,n){return await la("store://change",r=>{r.payload.resourceId===this.rid&&r.payload.key===s&&n(r.payload.exists?r.payload.value:void 0)})}async onChange(s){return await la("store://change",n=>{n.payload.resourceId===this.rid&&s(n.payload.key,n.payload.exists?n.payload.value:void 0)})}}var ra;(function(a){a[a.Audio=1]="Audio",a[a.Cache=2]="Cache",a[a.Config=3]="Config",a[a.Data=4]="Data",a[a.LocalData=5]="LocalData",a[a.Document=6]="Document",a[a.Download=7]="Download",a[a.Picture=8]="Picture",a[a.Public=9]="Public",a[a.Video=10]="Video",a[a.Resource=11]="Resource",a[a.Temp=12]="Temp",a[a.AppConfig=13]="AppConfig",a[a.AppData=14]="AppData",a[a.AppLocalData=15]="AppLocalData",a[a.AppCache=16]="AppCache",a[a.AppLog=17]="AppLog",a[a.Desktop=18]="Desktop",a[a.Executable=19]="Executable",a[a.Font=20]="Font",a[a.Home=21]="Home",a[a.Runtime=22]="Runtime",a[a.Template=23]="Template"})(ra||(ra={}));var ia;(function(a){a[a.Start=0]="Start",a[a.Current=1]="Current",a[a.End=2]="End"})(ia||(ia={}));async function va(a,s){if(a instanceof URL&&a.protocol!=="file:")throw new TypeError("Must be a file URL.");return await o("plugin:fs|exists",{path:a instanceof URL?a.toString():a,options:s})}async function ss(a={}){return typeof a=="object"&&Object.freeze(a),await o("plugin:dialog|open",{options:a})}async function oa(a,s){var r,i;const n=s;await o("plugin:dialog|message",{message:a.toString(),title:(r=n==null?void 0:n.title)==null?void 0:r.toString(),kind:n==null?void 0:n.kind,okButtonLabel:(i=n==null?void 0:n.okLabel)==null?void 0:i.toString()})}var es=w('<div class="modal-content svelte-yrz482"><h2 class="svelte-yrz482">数据源设置</h2> <div class="source-card svelte-yrz482"><div class="source-info svelte-yrz482"><span class="label svelte-yrz482">当前数据源位置</span> <p class="path svelte-yrz482"> </p></div> <button class="change-button svelte-yrz482"><svg class="icon svelte-yrz482" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M369.777778 455.111111h284.444444c17.066667 0 28.444444 11.377778 28.444445 28.444445s-11.377778 28.444444-28.444445 28.444444h-284.444444c-17.066667 0-28.444444-11.377778-28.444445-28.444444s11.377778-28.444444 28.444445-28.444445z" class="svelte-yrz482"></path><path d="M56.888889 483.555556C56.888889 625.777778 170.666667 739.555556 312.888889 739.555556H398.222222v-56.888889H312.888889C204.8 682.666667 113.777778 591.644444 113.777778 483.555556S204.8 284.444444 312.888889 284.444444H398.222222V227.555556H312.888889C170.666667 227.555556 56.888889 341.333333 56.888889 483.555556zM711.111111 227.555556H625.777778v56.888888h85.333333C819.2 284.444444 910.222222 375.466667 910.222222 483.555556S819.2 682.666667 711.111111 682.666667H625.777778v56.888889h85.333333C853.333333 739.555556 967.111111 625.777778 967.111111 483.555556S853.333333 227.555556 711.111111 227.555556z" class="svelte-yrz482"></path></svg> 修改位置</button></div></div>'),ts=w('<div class="error-message svelte-yrz482"> </div>'),ns=w('<div class="loading-container svelte-yrz482"><div class="loading-spinner svelte-yrz482"></div> <span class="svelte-yrz482">加载中...</span></div>');function us(a,s){pa(s,!1);async function n(){const p=await ss({title:"选择远程数据源",directory:!0,multiple:!1});if(p){let c=!1;if(p){const u=await va(`${p}\\data\\data.db`),_=await va(`${p}\\settings.json`);if(console.log(u,_),u&&_?c=!0:c=!1,!c){await oa("远程数据源不可用");return}await(await R.load("settings.json")).set("remote_source",p),Ha("remote_source",p),r(),await oa("数据库位置已修改，请保存后，重启软件生效")}}}const r=async()=>await(await R.load("settings.json")).get("remote_source");Va();var i=ka(),j=da(i);ua(j,r,p=>{var c=ns();z(p,c)},(p,c)=>{var u=es(),_=l(e(u),2),h=e(_),x=l(e(h),2),S=e(x,!0);t(x),t(h);var A=l(h,2);t(_),t(u),m(()=>v(S,b(c))),Oa("click",A,n),z(p,u)},(p,c)=>{var u=ts(),_=e(u);t(u),m(()=>v(_,`加载数据源信息失败: ${b(c).message??""}`)),z(p,u)}),z(a,i),ca()}export{ds as R,us as S,cs as c,va as e};
