var m=Object.defineProperty;var l=(r,t,e)=>t in r?m(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var h=(r,t,e)=>l(r,typeof t!="symbol"?t+"":t,e);import{A as n,E as i}from"./modalStore.dvlA8jbC.js";const s=class s{constructor(){h(this,"baseUrl","");h(this,"username");h(this,"machineName")}static getInstance(){return s.instance||(s.instance=new s),s.instance}configure(t){this.baseUrl=t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl,this.username=t.username,this.machineName=t.machineName}getAuthHeaders(){const t={"Content-Type":"application/json"};return this.username&&(t.username=this.username),this.machineName&&(t.machinename=this.machineName),t}async handleResponse(t){if(!t.ok){let e;try{e=(await t.json()).message||t.statusText}catch{e=t.statusText}throw new n(i.API_ERROR,`API request failed: ${e}`,{status:t.status})}try{return await t.json()}catch(e){throw new n(i.API_PARSE_ERROR,"Failed to parse API response",{originalError:e})}}async fetch(t,e={}){try{const a=t.startsWith("http")?t:`${this.baseUrl}${t.startsWith("/")?t:`/${t}`}`,o=e.skipAuth?e.headers||{}:{...this.getAuthHeaders(),...e.headers||{}},u=await fetch(a,{...e,headers:o});return await this.handleResponse(u)}catch(a){throw a instanceof n?a:new n(i.API_REQUEST_ERROR,"API request failed",{originalError:a})}}async get(t,e={}){return this.fetch(t,{...e,method:"GET"})}async post(t,e,a={}){return this.fetch(t,{...a,method:"POST",body:JSON.stringify(e)})}async put(t,e,a={}){return this.fetch(t,{...a,method:"PUT",body:JSON.stringify(e)})}async delete(t,e={}){return this.fetch(t,{...e,method:"DELETE"})}};h(s,"instance");let c=s;const f=c.getInstance();export{f as a};
