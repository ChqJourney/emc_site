import{d as Ss,s as $s,b as l,a as _,t as z,c as Cs,f as Hs,g as Ts}from"./disclose-version.BtOGdF5q.js";import{I as ls,M as s,O as e,N as a,K as d,d as j,J as vs,L as rs,c as ks,Q as Ms}from"./utils.Dv3gV-s9.js";import{a as ns,d as Is,S as as,o as Os,g as es,m as ts}from"./operation.Bbmgri_J.js";import{i as Bs}from"./if.DdkDn34N.js";import{m as Ns,e as Rs,a as Ds}from"./modalStore.dvlA8jbC.js";import{i as Es}from"./lifecycle.CkqpZYRK.js";var Gs=(h,m)=>ks(m,!j(m)),Js=z('<span class="value svelte-1splzaj"> </span>'),Ks=z('<span class="value svelte-1splzaj"> </span>'),Ls=z('<span class="value svelte-1splzaj">加载中...</span>'),Ps=z('<div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">产品名称：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item purpose svelte-1splzaj"><span class="label svelte-1splzaj">用途描述：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">联系人：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">联系电话：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">负责销售：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">创建：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">创建时间：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">修改时间：</span> <span class="value svelte-1splzaj"> </span></div>',1),Qs=z('<div class="reservation-info svelte-1splzaj"><div class="header svelte-1splzaj"><h4 class="svelte-1splzaj">预约详情</h4> <button class="detail-btn svelte-1splzaj"> </button></div> <div class="info-grid svelte-1splzaj"><div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">预约日期：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">工位：</span> <!></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">时间段：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">项目工程师：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">测试工程师：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">项目号：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">测试内容：</span> <span class="value svelte-1splzaj"> </span></div> <div class="info-item svelte-1splzaj"><span class="label svelte-1splzaj">客户名称：</span> <span class="value svelte-1splzaj"> </span></div> <!></div></div>');function sa(h,m){ls(m,!0);const w=$s(),x=()=>Cs(Ns,"$modalStore",w);let{reservation:t}=x().props;console.log(t);let g=Ms(!1);const v=r=>{switch(r){case"T1":return"9:30-12:00";case"T2":return"13:00-15:00";case"T3":return"15:00-17:30";case"T4":return"18:00-20:30";case"T5":return"20:30-23:59";default:return"未知时间段"}},n=r=>r.toString().substring(0,16),i=async r=>{try{return(await Is.getStationById(r))[0].name}catch(o){Rs.handleError(o)}};var p=Qs(),u=s(p),f=e(s(u),2);f.__click=[Gs,g];var S=s(f);a(f),a(u);var y=e(u,2),$=s(y),J=e(s($),2),is=s(J,!0);a(J),a($);var C=e($,2),ps=e(s(C),2);ns(ps,()=>i(t.station_id),r=>{var o=Ls();_(r,o)},(r,o)=>{var c=Js(),b=s(c,!0);a(c),d(()=>l(b,j(o))),_(r,c)},(r,o)=>{var c=Ks(),b=s(c);a(c),d(()=>l(b,`加载失败:${j(o).message??""}`)),_(r,c)}),a(C);var H=e(C,2),K=e(s(H),2),os=s(K,!0);d(()=>l(os,v(t.time_slot))),a(K),a(H);var T=e(H,2),L=e(s(T),2),cs=s(L,!0);a(L),a(T);var k=e(T,2),P=e(s(k),2),ds=s(P,!0);a(P),a(k);var M=e(k,2),Q=e(s(M),2),_s=s(Q,!0);a(Q),a(M);var I=e(M,2),V=e(s(I),2),us=s(V,!0);a(V),a(I);var O=e(I,2),q=e(s(O),2),zs=s(q,!0);a(q),a(O);var js=e(O,2);Bs(js,()=>j(g),r=>{var o=Ps(),c=vs(o),b=e(s(c),2),ms=s(b,!0);a(b),a(c);var B=e(c,2),A=e(s(B),2),fs=s(A,!0);a(A),a(B);var N=e(B,2),F=e(s(N),2),bs=s(F,!0);a(F),a(N);var R=e(N,2),U=e(s(R),2),gs=s(U,!0);a(U),a(R);var D=e(R,2),W=e(s(D),2),hs=s(W,!0);a(W),a(D);var E=e(D,2),X=e(s(E),2),xs=s(X,!0);a(X),a(E);var G=e(E,2),Y=e(s(G),2),ys=s(Y,!0);d(()=>l(ys,n(t.created_On))),a(Y),a(G);var Z=e(G,2),ss=e(s(Z),2),ws=s(ss,!0);d(()=>l(ws,n(t.updated_On))),a(ss),a(Z),d(()=>{l(ms,t.product_name),l(fs,t.purpose_description),l(bs,t.contact_name),l(gs,t.contact_phone),l(hs,t.sales),l(xs,t.reservate_by)}),_(r,o)}),a(y),a(p),d(()=>{l(S,`${(j(g)?"收起":"展开")??""}详情`),l(is,t.reservation_date),l(cs,t.project_engineer),l(ds,t.testing_engineer),l(_s,t.job_no),l(us,t.tests),l(zs,t.client_name)}),_(h,p),rs()}Ss(["click"]);var Vs=z('<div class="modal-content svelte-yrz482"><h2 class="svelte-yrz482">数据源设置</h2> <div class="source-card svelte-yrz482"><div class="source-info svelte-yrz482"><span class="label svelte-yrz482">当前数据源位置</span> <p class="path svelte-yrz482"> </p></div> <button class="change-button svelte-yrz482"><svg class="icon svelte-yrz482" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M369.777778 455.111111h284.444444c17.066667 0 28.444444 11.377778 28.444445 28.444445s-11.377778 28.444444-28.444445 28.444444h-284.444444c-17.066667 0-28.444444-11.377778-28.444445-28.444444s11.377778-28.444444 28.444445-28.444445z" class="svelte-yrz482"></path><path d="M56.888889 483.555556C56.888889 625.777778 170.666667 739.555556 312.888889 739.555556H398.222222v-56.888889H312.888889C204.8 682.666667 113.777778 591.644444 113.777778 483.555556S204.8 284.444444 312.888889 284.444444H398.222222V227.555556H312.888889C170.666667 227.555556 56.888889 341.333333 56.888889 483.555556zM711.111111 227.555556H625.777778v56.888888h85.333333C819.2 284.444444 910.222222 375.466667 910.222222 483.555556S819.2 682.666667 711.111111 682.666667H625.777778v56.888889h85.333333C853.333333 739.555556 967.111111 625.777778 967.111111 483.555556S853.333333 227.555556 711.111111 227.555556z" class="svelte-yrz482"></path></svg> 修改位置</button></div></div>'),qs=z('<div class="error-message svelte-yrz482"> </div>'),As=z('<div class="loading-container svelte-yrz482"><div class="loading-spinner svelte-yrz482"></div> <span class="svelte-yrz482">加载中...</span></div>');function aa(h,m){ls(m,!1);async function w(){const v=await Os({title:"选择远程数据源",directory:!0,multiple:!1});if(v){let n=!1;if(v){const i=await es(`${v}\\data\\data.db`),p=await es(`${v}\\settings.json`);if(console.log(i,p),i&&p?n=!0:n=!1,!n){await ts("远程数据源不可用");return}await(await as.load("settings.json")).set("remote_source",v),Ds("remote_source",v),x(),await ts("数据库位置已修改，请保存后，重启软件生效")}}}const x=async()=>await(await as.load("settings.json")).get("remote_source");Es();var t=Hs(),g=vs(t);ns(g,x,v=>{var n=As();_(v,n)},(v,n)=>{var i=Vs(),p=e(s(i),2),u=s(p),f=e(s(u),2),S=s(f,!0);a(f),a(u);var y=e(u,2);a(p),a(i),d(()=>l(S,j(n))),Ts("click",y,w),_(v,i)},(v,n)=>{var i=qs(),p=s(i);a(i),d(()=>l(p,`加载数据源信息失败: ${j(n).message??""}`)),_(v,i)}),_(h,t),rs()}export{sa as R,aa as S};
